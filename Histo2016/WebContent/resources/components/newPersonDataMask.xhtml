<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite">


<composite:interface>
	<!-- tperson object -->
	<composite:attribute name="person" required="true" />

	<!-- cc.attrs.pannelID  -->
	<composite:attribute name="pannelID" required="true" />

	<!-- edit not permitted -->
	<composite:attribute name="disabled" required="true" />
</composite:interface>

<composite:implementation>


	<h:panelGrid columns="3"
		columnClasses="defaultListingTableColumn15 defaultListingTableColumnTop, defaultListingTableColumnTop, defaultListingTableColumnTop"
		styleClass="defaultListingTableFirstColumEnummeration">

		<!-- ****************** Person ****************** -->
		<h:panelGrid columns="1">
			<h:outputLabel value="#{msg['component.personDataMask.person']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- Title -->
			<p:outputLabel value="#{msg['component.personDataMask.title']}" />
			<p:selectOneMenu style="width:100px" id="#{cc.attrs.pannelID}_title"
				editable="true" disabled="#{cc.attrs.disabled}"
				value="#{cc.attrs.person.title}">
				<f:selectItem itemLabel="" itemValue="" />
				<f:selectItem
					itemLabel="#{msg['component.personDataMask.title.dr']}"
					itemValue="#{msg['component.personDataMask.title.dr']}" />
				<f:selectItem
					itemLabel="#{msg['component.personDataMask.title.prof']}"
					itemValue="#{msg['component.personDataMask.title.prof']}" />
			</p:selectOneMenu>

			<!-- Name -->
			<p:outputLabel value="#{msg['component.personDataMask.lastname']}" />
			<p:inputText id="#{cc.attrs.pannelID}_fname" name="lname"
				autocomplete="family-name" value="#{cc.attrs.person.lastName}"
				disabled="#{cc.attrs.disabled}" />
			<!-- firstName -->
			<p:outputLabel value="#{msg['component.personDataMask.firstName']}" />
			<p:inputText id="#{cc.attrs.pannelID}_firstName" name="fname"
				autocomplete="given-name" value="#{cc.attrs.person.firstName}"
				disabled="#{cc.attrs.disabled}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- birthday -->
			<p:outputLabel value="#{msg['component.personDataMask.birthday']}" />
			<p:calendar id="#{cc.attrs.pannelID}_birthday" name="bday"
				autocomplete="bday" value="#{cc.attrs.person.birthday}" locale="de"
				disabled="#{cc.attrs.disabled}" navigator="true"
				pattern="dd.MM.yyyy" mask="true" />

			<!-- gender -->
			<p:outputLabel value="#{msg['component.personDataMask.gender']}" />
			<p:selectOneMenu id="#{cc.attrs.pannelID}_gender" style="width:100px"
				name="sex" autocomplete="sex" disabled="#{cc.attrs.disabled}"
				value="#{cc.attrs.person.gender}">
				<f:selectItem
					itemLabel="#{msg['component.personDataMask.gender.select']}"
					itemValue="UNKNOWN" />
				<f:selectItem
					itemLabel="#{msg['component.personDataMask.gender.male']}"
					itemValue="MALE" />
				<f:selectItem
					itemLabel="#{msg['component.personDataMask.gender.female']}"
					itemValue="FEMALE" />
			</p:selectOneMenu>
		</h:panelGrid>
		<!-- ****************** Person ****************** -->

		<!-- ****************** Adress ****************** -->
		<h:panelGrid columns="1">
			<h:outputLabel value="#{msg['component.personDataMask.adress']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- street -->
			<p:outputLabel
				value="#{msg['component.personDataMask.contact.street']}" />
			<p:inputText id="#{cc.attrs.pannelID}_street" name="street-address"
				autocomplete="street-address"
				value="#{cc.attrs.person.contact.street}"
				disabled="#{cc.attrs.disabled}" />

			<h:panelGroup />
			<h:panelGroup />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- Town -->
			<p:outputLabel
				value="#{msg['component.personDataMask.contact.town']}" />
			<p:inputText id="#{cc.attrs.pannelID}_town" name="city"
				autocomplete="address-level2"
				value="#{cc.attrs.person.contact.town}"
				disabled="#{cc.attrs.disabled}" />

			<!-- Postcode -->
			<p:outputLabel value="#{msg['component.personDataMask.adress.plz']}" />
			<p:inputText style="width:75px;"
				value="#{cc.attrs.person.contact.postcode}" name="postal-code"
				autocomplete="postal-code" disabled="#{cc.attrs.disabled}" />
		</h:panelGrid>
		<!-- ****************** Adress ****************** -->

		<!-- ****************** Contact ****************** -->
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['component.personDataMask.miscellaneous']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- phone -->
			<p:outputLabel
				value="#{msg['component.personDataMask.contact.phone']}" />
			<p:inputText value="#{cc.attrs.person.contact.phone}" name="phone"
				autocomplete="tel" disabled="#{cc.attrs.disabled}" />
			<!-- mobile -->
			<p:outputLabel
				value="#{msg['component.personDataMask.miscellaneous.mobile']}" />
			<p:inputText value="#{cc.attrs.person.contact.phone}" name="phone"
				autocomplete="tel" disabled="#{cc.attrs.disabled}" />


			<h:outputLabel
				value="#{msg['component.personDataMask.miscellaneous.update']}"></h:outputLabel>
			<p:selectBooleanCheckbox value="#{cc.attrs.person.autoUpdate}"
				title="#{msg['component.personDataMask.miscellaneous.update.text']}" />
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="defaultListingTableContainer"
			columnClasses="defaultListingTableColumn30,">
			<!-- fax -->
			<p:outputLabel
				value="#{msg['component.personDataMask.miscellaneous.fax']}" />
			<p:inputText value="#{cc.attrs.person.contact.fax}" name="fax"
				autocomplete="fax" disabled="#{cc.attrs.disabled}" />
			<!-- mail -->
			<p:outputLabel
				value="#{msg['component.personDataMask.miscellaneous.mail']}" />
			<p:inputText id="#{cc.attrs.pannelID}_email" name="mail"
				autocomplete="mail" value="#{cc.attrs.person.contact.email}"
				disabled="#{cc.attrs.disabled}" />
		</h:panelGrid>
		<!-- ****************** Contact ****************** -->


	</h:panelGrid>
	<!-- ****************** Organization ****************** -->
	<h:panelGrid columns="2"
		columnClasses="defaultListingTableColumn15 defaultListingTableColumnTop, defaultListingTableColumnTop, defaultListingTableColumnTop"
		styleClass="defaultListingTableFirstColumEnummeration">
		<h:panelGrid columns="1">
			<h:outputLabel
				value="#{msg['component.personDataMask.organization']}" />
		</h:panelGrid>

		<h:panelGrid columns="1" styleClass="defaultListingTableContainer">

			<p:dataTable var="organization" style="width:90%;" scrollable="true"
				id="organizationTab" scrollHeight="75" draggableRows="true"
				styleClass="highlightedDataTable noBordersAll collapsedBordersAll"
				value="#{cc.attrs.person.organizsations}">

				<p:column
					headerText="#{msg['component.personDataMask.organization.name']}">
					<h:outputText value="#{organization.name}" />
				</p:column>

				<p:column
					headerText="#{msg['component.personDataMask.organization.note']}">
					<h:outputLabel value="#{organization.note}">
						<f:converter converterId="org.histo.ui.TruncateConverter" />
						<f:attribute name="truncateAt" value="50" />
						<f:attribute name="continuationMark" value="..." />
					</h:outputLabel>
				</p:column>

				<p:column style="width:15px">
					<ui:fragment rendered="#{organization.intern}">
						<i class="fa fa-fw fa-check-circle icon-green"
							style="margin-left: 5px"
							title="#{msg['component.personDataMask.organization.clinicIntern']}" />
					</ui:fragment>
				</p:column>

				<p:column style="width:15px">
					<f:facet name="header">
						<h:panelGrid columns="1" styleClass="defaultListingTableContainer">
							<p:commandLink id="upload"
								title="#{msg['component.personDataMask.organization.add']}"
								actionListener="#{dialogHandlerAction.organizationListDialog.initAndPrepareBean(cc.attrs.person)}">
								<p:ajax event="dialogReturn" update="organizationTab" />
								<i class="fa fa-plus" />
							</p:commandLink>
						</h:panelGrid>
					</f:facet>
					<p:commandLink
						actionListener="#{dialogHandlerAction.organizationListDialog.removeOrganizationFromPerson(cc.attrs.person, organization)}"
						update="organizationTab"
						title="#{msg['component.personDataMask.organization.remove']}">
						<i class="fa fa-remove" style="margin-left: 8px" />
					</p:commandLink>
				</p:column>

			</p:dataTable>
		</h:panelGrid>
	</h:panelGrid>

	<!-- ****************** Organization ****************** -->

</composite:implementation>
</html>
